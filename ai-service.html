<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡∏£‡∏∞‡∏ö‡∏ö‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á | ‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô‡πÑ‡∏Æ‡πÄ‡∏ó‡∏Ñ</title>

<!-- Google Tag Manager / GA4 (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏™‡πà‡πÅ‡∏ó‡∏ô‡πÑ‡∏î‡πâ) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-XXXXXXXXXX');
</script>

<style>
body {
  font-family: "Segoe UI", Tahoma, sans-serif;
  background: #0f1115;
  color: #eaeaea;
  margin: 0;
}
header {
  padding: 20px;
  text-align: center;
  background: linear-gradient(90deg,#111,#1b1f2a);
  border-bottom: 3px solid #d4af37;
}
header h1 {
  margin: 0;
  font-size: 1.6rem;
  color: #d4af37;
}
header p {
  margin-top: 8px;
  font-size: 0.9rem;
  color: #ccc;
}

.container {
  max-width: 820px;
  margin: 20px auto;
  background: #151923;
  border-radius: 10px;
  box-shadow: 0 30px 80px rgba(0,0,0,0.6);
  overflow: hidden;
}

.chat-box {
  height: 520px;
  overflow-y: auto;
  padding: 25px;
}

.msg {
  margin-bottom: 18px;
  line-height: 1.6;
}
.msg.user {
  text-align: right;
}
.msg.user .bubble {
  display: inline-block;
  background: #243447;
  padding: 14px 18px;
  border-radius: 14px 14px 4px 14px;
  max-width: 80%;
}
.msg.bot .bubble {
  display: inline-block;
  background: #1a1f2b;
  border-left: 5px solid #d4af37;
  padding: 14px 18px;
  border-radius: 14px 14px 14px 4px;
  max-width: 80%;
}

.input-area {
  display: flex;
  padding: 15px;
  border-top: 1px solid #2a2f3d;
  background: #11141c;
}
.input-area input {
  flex: 1;
  padding: 14px;
  border-radius: 6px;
  border: none;
  outline: none;
  font-size: 1rem;
}
.input-area button {
  margin-left: 10px;
  padding: 0 22px;
  border: none;
  border-radius: 6px;
  background: #d4af37;
  color: #111;
  font-weight: bold;
  cursor: pointer;
}
.input-area button:hover {
  background: #e2c96b;
}

.cta {
  margin-top: 15px;
  padding: 18px;
  background: #0b0d12;
  border: 2px solid #d4af37;
  border-radius: 10px;
}
.cta strong {
  color: #ff5252;
}
.cta a {
  display: inline-block;
  margin-top: 12px;
  padding: 12px 18px;
  background: #ff5252;
  color: #fff;
  border-radius: 6px;
  text-decoration: none;
  font-weight: bold;
}
.cta a.alt {
  background: #2ecc71;
  margin-left: 8px;
}
</style>
</head>

<body>

<header>
  <h1>‡∏£‡∏∞‡∏ö‡∏ö‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏ö‡∏ö</h1>
  <p>‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô‡πÑ‡∏Æ‡πÄ‡∏ó‡∏Ñ ‚Äî ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡πÄ‡∏Å‡∏¥‡∏î</p>
</header>

<div class="container">
  <div class="chat-box" id="chatBox">
    <div class="msg bot">
      <div class="bubble">
        ‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö  
        ‡∏ú‡∏°‡∏Ñ‡∏∑‡∏≠‡∏£‡∏∞‡∏ö‡∏ö‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô‡∏Ç‡∏≠‡∏á <strong>‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô‡πÑ‡∏Æ‡πÄ‡∏ó‡∏Ñ</strong><br><br>
        ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Ç‡∏≠‡∏á‡∏ú‡∏°‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢  
        ‡πÅ‡∏ï‡πà‡∏Ñ‡∏∑‡∏≠‡∏ä‡πà‡∏ß‡∏¢‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô <strong>‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á</strong>  
        ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏à‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏°‡πà‡∏ó‡∏±‡∏ô<br><br>
        ‡πÇ‡∏õ‡∏£‡∏î‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏´‡∏£‡∏∑‡∏≠‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏û‡∏ö‡∏Ñ‡∏£‡∏±‡∏ö
      </div>
    </div>
  </div>

  <div class="input-area">
    <input type="text" id="userInput" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏û‡∏ö..." />
    <button onclick="sendMessage()">‡∏™‡πà‡∏á</button>
  </div>
</div>

<script>
/* ================= CONFIG ================= */
const API_KEY = "‡πÉ‡∏™‡πà_API_KEY_‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì";
const PHONE = "094-474-9874";
const LINE = "@KKHITECH";

/* ================= STATE ================= */
let HUMAN_TAKEOVER = false;
let CASE_TYPE = "NORMAL";

/* ================= TRIGGERS ================= */
const HIGH_INTENT_WORDS = [
  "‡∏Å‡∏•‡∏±‡∏ß","‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢","‡∏à‡∏∞‡∏û‡∏±‡∏á","‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢","‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ã‡πà‡∏≠‡∏°","‡∏õ‡∏•‡πà‡∏≠‡∏¢‡πÑ‡∏ß‡πâ","‡∏Ñ‡∏∏‡πâ‡∏°‡πÑ‡∏´‡∏°","‡πÅ‡∏û‡∏á‡πÑ‡∏´‡∏°"
];
const EMERGENCY_WORDS = [
  "‡πÑ‡∏ü‡πÑ‡∏´‡∏°‡πâ","‡∏Å‡∏•‡∏¥‡πà‡∏ô‡πÑ‡∏´‡∏°‡πâ","‡∏Ñ‡∏ß‡∏±‡∏ô","‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏¢‡πÑ‡∏ü","‡πÑ‡∏ü‡∏î‡∏π‡∏î","‡∏ä‡πá‡∏≠‡∏ï","‡∏£‡πâ‡∏≠‡∏ô‡∏à‡∏±‡∏î","‡πÄ‡∏ö‡∏£‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå‡∏ï‡∏±‡∏î"
];

function hasWord(list, text) {
  return list.some(w => text.includes(w));
}

/* ================= UI HELPERS ================= */
function addMessage(role, html) {
  const div = document.createElement("div");
  div.className = "msg " + role;
  div.innerHTML = `<div class="bubble">${html}</div>`;
  document.getElementById("chatBox").appendChild(div);
  document.getElementById("chatBox").scrollTop = 999999;
}

/* ================= MAIN ================= */
async function sendMessage() {
  const input = document.getElementById("userInput");
  const text = input.value.trim();
  if (!text) return;

  addMessage("user", text);
  input.value = "";

  if (hasWord(EMERGENCY_WORDS, text)) {
    CASE_TYPE = "EMERGENCY";
    HUMAN_TAKEOVER = true;
  } else if (hasWord(HIGH_INTENT_WORDS, text)) {
    CASE_TYPE = "NORMAL";
    HUMAN_TAKEOVER = true;
  }

  if (HUMAN_TAKEOVER) {
    if (CASE_TYPE === "EMERGENCY") {
      addMessage("bot", `
        ‚ö†Ô∏è <strong>‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏ö‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πà‡∏≤‡∏¢‡πÄ‡∏Ñ‡∏™‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô</strong><br><br>
        ‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏à‡πâ‡∏á ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ï‡πà‡∏≠‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á  
        ‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ï‡πà‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏ú‡πà‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏î‡πá‡∏î‡∏Ç‡∏≤‡∏î
        <div class="cta">
          <strong>‡πÇ‡∏ó‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏ä‡πà‡∏≤‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</strong><br>
          ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏Å‡πà‡∏≠‡∏ô‡∏à‡∏∞‡∏™‡∏≤‡∏¢‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ<br>
          <a href="tel:${PHONE}">üìû ‡πÇ‡∏ó‡∏£‡∏î‡πà‡∏ß‡∏ô ${PHONE}</a>
        </div>
      `);
      gtag("event","ai_emergency",{event_category:"AI"});
    } else {
      addMessage("bot", `
        ‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏´‡πâ‡∏°‡∏≤  
        ‡πÄ‡∏Ñ‡∏™‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏ï‡πà‡∏≠‡∏ú‡πà‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö<br><br>
        ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏à‡∏•‡∏∏‡∏Å‡∏•‡∏≤‡∏°  
        ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏ä‡πà‡∏≤‡∏á‡∏ú‡∏π‡πâ‡∏ä‡∏≥‡∏ô‡∏≤‡∏ç‡∏Å‡∏≤‡∏£‡∏î‡∏π‡πÅ‡∏•‡∏ï‡πà‡∏≠‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á
        <div class="cta">
          <strong>‡∏ó‡∏≤‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î</strong><br>
          ‡πÇ‡∏ó‡∏£‡∏û‡∏π‡∏î‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ö‡∏ä‡πà‡∏≤‡∏á‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏£‡∏≠‡∏ö‡∏Ñ‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à<br>
          <a href="tel:${PHONE}">üìû ‡πÇ‡∏ó‡∏£ ${PHONE}</a>
          <a class="alt" href="https://line.me/ti/p/~KKHITECH">üí¨ LINE ${LINE}</a>
        </div>
      `);
      gtag("event","ai_normal",{event_category:"AI"});
    }
    document.getElementById("userInput").disabled = true;
    return;
  }

  try {
    const res = await fetch(
      `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=${API_KEY}`,
      {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          contents: [{ role:"user", parts:[{text}] }],
          systemInstruction: {
            parts: [{
              text: `
‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠‡∏£‡∏∞‡∏ö‡∏ö‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô
‡∏´‡πâ‡∏≤‡∏°‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢ ‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏´‡πâ‡∏£‡∏≤‡∏Ñ‡∏≤ ‡∏´‡πâ‡∏≤‡∏°‡∏ô‡∏±‡∏î
‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏©‡∏≤‡∏ä‡πà‡∏≤‡∏á ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏±‡∏á‡∏ß‡∏•‡πÄ‡∏ä‡∏¥‡∏á‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•
‡∏ñ‡πâ‡∏≤‡∏û‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á ‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏ä‡πà‡∏≤‡∏á‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á
              `
            }]
          }
        })
      }
    );
    const data = await res.json();
    const reply = data.candidates?.[0]?.content?.parts?.[0]?.text
      || "‡∏ú‡∏°‡∏Ç‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏≠‡∏µ‡∏Å‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö";
    addMessage("bot", reply);
  } catch {
    addMessage("bot", `
      ‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÑ‡∏°‡πà‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ  
      ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏ä‡πà‡∏≤‡∏á‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á‡∏Ñ‡∏£‡∏±‡∏ö<br>
      üìû ${PHONE}
    `);
  }
}
</script>

</body>
</html>
