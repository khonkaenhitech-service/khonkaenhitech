<!DOCTYPE HTML>
<html lang="th">
<head>
  <script>
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});
      var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';
      j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-M26CWCKV');
  </script>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡∏ä‡πà‡∏≤‡∏á‡∏ú‡∏π‡πâ‡∏ä‡∏≥‡∏ô‡∏≤‡∏ç‡∏Å‡∏≤‡∏£ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• | ‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô‡πÑ‡∏Æ‡πÄ‡∏ó‡∏Ñ GROUP</title>
   
  <link rel="icon" href="images/favicon.webp" />
  <link rel="stylesheet" href="assets/css/main.css" />
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <style>
    /* -----------------------------
       Psychological Color System (7-11 Influence)
    ----------------------------- */
    :root {
        --711-green: #008148;   /* Safe Zone / Trust */
        --warm-orange: #f26522;  /* Action / Friendship */
        --danger-red: #ee1c25;   /* Crisis / Pain Points */
        --kh-gold: #d4af37;
        --aura-gold: 0 0 35px rgba(212, 175, 55, 0.9), 0 0 70px rgba(212, 175, 55, 0.4);
        --user-warm: #ff9f43;    /* Warm Amber for VIP Client */
    }

    /* -----------------------------
       Header Layout: Executive Level
    ----------------------------- */
    #header {
        position: sticky; top: 0; z-index: 1000;
        background: rgba(255, 255, 255, 0.98);
        backdrop-filter: blur(15px);
        padding: 15px 0;
        margin-bottom: 20px;
        box-shadow: 0 4px 25px rgba(0,0,0,0.05);
    }
    #header::after {
        content: ''; position: absolute; bottom: 0; left: 0; width: 100%; height: 5px;
        background: linear-gradient(90deg, var(--711-green) 0%, var(--kh-gold) 50%, var(--danger-red) 100%);
    }
    .kh-top { display: flex; align-items: center; justify-content: center; position: relative; width: 100%; max-width: 1200px; margin: 0 auto; padding: 0 20px; }
    .kh-menu-btn { position: absolute; left: 20px; width: 44px; height: 44px; border-radius: 8px; border: 1px solid #ddd; background: #fff; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: 0.3s; }

    /* Shop Logo: Golden Pulse Aura (Eternal Confidence) */
    .kh-brand { display: flex; flex-direction: column; align-items: center; text-decoration: none; border-bottom: none; }
    .kh-brand__img img { 
        width: 90px; height: 90px; border-radius: 50%; border: 4px solid var(--kh-gold); 
        box-shadow: var(--aura-gold); 
        animation: divineGlow 2.5s infinite ease-in-out;
    }
    
    @keyframes divineGlow {
        0%, 100% { box-shadow: 0 0 20px rgba(212, 175, 55, 0.6); transform: scale(1); }
        50% { box-shadow: 0 0 50px rgba(212, 175, 55, 1), 0 0 90px rgba(212, 175, 55, 0.5); transform: scale(1.04); }
    }

    /* Chat Area */
    .ai-container { max-width: 850px; margin: 0 auto; background: #fff; border-radius: 12px; box-shadow: 0 40px 120px rgba(0,0,0,0.15); overflow: hidden; border: 1px solid #eee; }
    .chat-box { height: 550px; overflow-y: auto; padding: 35px; background: #f9f9f9; display: flex; flex-direction: column; gap: 20px; scroll-behavior: smooth; }
    
    .message { display: flex; align-items: flex-start; gap: 15px; animation: slideUp 0.4s ease-out; }
    .message.user { flex-direction: row-reverse; }
    
    /* Bot Identity */
    .avatar.bot { 
        width: 50px; height: 50px; border-radius: 50%; border: 2.5px solid var(--kh-gold); 
        background: #fff; overflow: hidden; flex-shrink: 0;
        box-shadow: 0 0 15px rgba(212, 175, 55, 0.4);
    }
    .avatar.bot img { width: 100%; height: 100%; object-fit: cover; }
    
    /* VIP Client Identity (Warm Amber Verified) */
    .avatar.user { 
        width: 50px; height: 50px; border-radius: 50%; background: var(--user-warm); color: #fff; 
        display: flex; align-items: center; justify-content: center; flex-shrink: 0;
        border: 2px solid #fff; box-shadow: 0 5px 15px rgba(255, 159, 67, 0.4);
        font-size: 22px;
    }

    /* Bubbles */
    .bubble { padding: 20px 25px; border-radius: 14px; font-size: 1.05em; line-height: 1.7; max-width: 80%; position: relative; }
    .message.bot .bubble { 
        background: #fff; border: 1px solid #f0f0f0; border-left: 7px solid var(--711-green); color: #111; 
        box-shadow: 0 10px 30px rgba(0, 129, 72, 0.04); 
    }
    .message.user .bubble { background: #1a252f; color: #fff; border-bottom-right-radius: 4px; box-shadow: 0 10px 20px rgba(0,0,0,0.1); }

    /* üéØ FINAL MONOPOLY CARD */
    .closing-card {
        margin-top: 25px;
        display: flex;
        flex-direction: column;
        background: #fff;
        padding: 25px;
        border-radius: 12px;
        border: 2.5px solid var(--kh-gold);
        box-shadow: 0 20px 60px rgba(212, 175, 55, 0.25);
        max-width: 450px;
        animation: popIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
    .closing-header { 
        color: var(--danger-red); font-weight: 900; font-size: 1.15em; margin-bottom: 18px; 
        display: flex; align-items: center; justify-content: center; gap: 12px;
        border-bottom: 1.5px solid #f5f5f5; padding-bottom: 15px;
    }
    .closing-body { display: flex; align-items: center; gap: 25px; }
    .closing-qr-wrapper { position: relative; flex-shrink: 0; }
    .closing-qr { width: 135px; height: 135px; border-radius: 10px; border: 1px solid #eee; padding: 8px; background: #fff; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
    .closing-logo-mini { 
        position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); 
        width: 40px; height: 40px; border-radius: 50%; border: 1.5px solid var(--kh-gold); background: #fff;
    }
    .closing-info { font-size: 0.95em; display: flex; flex-direction: column; gap: 10px; flex: 1; }
    .closing-info strong { color: var(--warm-orange); font-size: 1.2em; line-height: 1.2; }
    .btn-action { 
        display: flex; align-items: center; justify-content: center; gap: 10px; 
        background: var(--711-green); color: #fff !important; padding: 12px 20px; border-radius: 5px; 
        font-weight: 800; text-decoration: none; transition: 0.3s;
    }
    .btn-action.phone { background: var(--warm-orange); }
    .btn-action:hover { transform: translateY(-2px); filter: brightness(1.1); box-shadow: 0 5px 15px rgba(0,0,0,0.1); }

    /* Highlights */
    .txt-safe { color: var(--711-green); font-weight: 900; }
    .txt-critical { color: var(--danger-red); font-weight: 900; text-decoration: underline; }
    .txt-gold { color: var(--kh-gold); font-weight: 900; }

    .input-area { padding: 25px; background: #fff; border-top: 1px solid #f0f0f0; display: flex; gap: 15px; align-items: center; }
    #user-input { flex: 1; border: 1px solid #ccc; border-radius: 5px; padding: 16px 25px; outline: none; transition: 0.3s; font-size: 1.1em; background: #fff; }
    #user-input:focus { border-color: var(--kh-gold); box-shadow: 0 0 15px rgba(212, 175, 55, 0.1); }
    .btn-send { background: #1a252f; color: #fff; border: none; width: 55px; height: 55px; border-radius: 5px; cursor: pointer; transition: 0.3s; display: flex; align-items: center; justify-content: center; font-size: 1.3em; }
    
    .typing-indicator { font-size: 0.95em; color: var(--711-green); font-weight: 800; padding: 10px 40px; display: none; font-style: italic; }

    @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes popIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }
  </style>
</head>
<body class="is-preload">

  <div id="wrapper">
    <div id="main">
      <div class="inner">

        <!-- Header -->
        <header id="header">
          <div class="kh-top">
            <button class="kh-menu-btn" onclick="window.history.back()"><i class="fas fa-chevron-left"></i></button>
            <a href="index.html" class="logo kh-brand">
              <span class="kh-brand__img"><img src="images/logo-khonkaen.webp" alt="‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô‡πÑ‡∏Æ‡πÄ‡∏ó‡∏Ñ"></span>
              <span class="kh-brand__text">
                <span class="lux-title-th" style="color: #111; font-size: 1.3rem;">‡∏ä‡πà‡∏≤‡∏á‡∏ú‡∏π‡πâ‡∏ä‡∏≥‡∏ô‡∏≤‡∏ç‡∏Å‡∏≤‡∏£ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</span>
                <span class="lux-subtitle-en" style="color: var(--711-green); font-size: 0.7rem; letter-spacing: 2.5px;">KHONKAEN HITECH EXPERT</span>
              </span>
            </a>
          </div>
        </header>

        <section>
            <div style="text-align:center; margin-bottom:25px;">
                <h2 style="color:var(--danger-red); font-weight:900; font-size: 2.2em; letter-spacing: 1px;">‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡πÅ‡∏•‡∏∞‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢</h2>
                <p style="color: #444; font-weight: 700;">‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÇ‡∏î‡∏¢ "‡∏ä‡πà‡∏≤‡∏á‡∏ú‡∏π‡πâ‡∏ä‡∏≥‡∏ô‡∏≤‡∏ç‡∏Å‡∏≤‡∏£ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏≤‡∏á‡∏£‡∏≠‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î</p>
            </div>

            <div class="ai-container">
                <div class="chat-box" id="chat-box">
                    <div class="message bot">
                        <div class="avatar bot"><img src="images/logo-khonkaen.webp"></div>
                        <div class="bubble">
                            ‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏¢‡∏≤‡∏°‡πÄ‡∏ä‡πâ‡∏≤‡∏Ñ‡∏£‡∏±‡∏ö... ‡∏ú‡∏°‡∏Ñ‡∏∑‡∏≠ <strong>‡∏ä‡πà‡∏≤‡∏á‡∏ú‡∏π‡πâ‡∏ä‡∏≥‡∏ô‡∏≤‡∏ç‡∏Å‡∏≤‡∏£ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</strong> ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏£‡πâ‡∏≤‡∏ô‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô‡πÑ‡∏Æ‡πÄ‡∏ó‡∏Ñ ü§ñ<br><br>
                            ‡∏ú‡∏°‡∏°‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡πà‡∏ß‡∏¢‡∏ó‡πà‡∏≤‡∏ô "‡∏≠‡πà‡∏≤‡∏ô‡∏Ç‡∏≤‡∏î" ‡∏ó‡∏∏‡∏Å‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡∏∏‡∏Å‡∏Ñ‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏á‡∏ö‡∏™‡∏∏‡∏Ç‡πÉ‡∏ô‡∏ö‡πâ‡∏≤‡∏ô‡∏ó‡πà‡∏≤‡∏ô... ‡∏á‡∏≤‡∏ô‡∏ä‡πà‡∏≤‡∏á‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡πÜ ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡πÉ‡∏ô‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£ ‡∏≠‡∏≤‡∏à‡∏ô‡∏≥‡∏°‡∏≤‡∏ã‡∏∂‡πà‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏ç‡πÄ‡∏™‡∏µ‡∏¢‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡πà‡∏≤‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏Ñ‡∏£‡∏±‡∏ö<br><br>
                            ‡πÇ‡∏õ‡∏£‡∏î‡∏£‡∏∞‡∏ö‡∏∏‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏û‡∏ö ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡πà‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á‡∏°‡∏≤‡πÉ‡∏´‡πâ‡∏ú‡∏°‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå "‡∏à‡∏∏‡∏î‡∏ï‡∏≤‡∏¢" ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö ‡∏ú‡∏°‡∏à‡∏∞‡∏ö‡∏≠‡∏Å‡∏ó‡πà‡∏≤‡∏ô‡πÄ‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏´‡∏≤‡∏¢‡∏ô‡∏∞‡∏ó‡∏µ‡πà‡∏ã‡πà‡∏≠‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£
                        </div>
                    </div>
                </div>
                
                <div class="typing-indicator" id="typing-indicator">
                    <i class="fas fa-wrench fa-spin"></i> ‡∏ä‡πà‡∏≤‡∏á‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÅ‡∏Å‡∏∞‡∏£‡∏≠‡∏¢‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á...
                </div>

                <div class="input-area">
                    <input type="file" id="image-upload" accept="image/*" style="display: none;">
                    <button class="btn-send" style="background:#f0f0f0; color:#333;" onclick="document.getElementById('image-upload').click()"><i class="fas fa-camera"></i></button>
                    <input type="text" id="user-input" placeholder="‡πÅ‡∏ä‡∏£‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏±‡∏á‡∏ß‡∏•‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥‡∏ó‡∏µ‡πà‡∏ó‡πà‡∏≤‡∏ô‡∏û‡∏ö‡∏°‡∏≤‡∏Ñ‡∏£‡∏±‡∏ö..." onkeypress="if(event.key==='Enter')sendMessage()">
                    <button class="btn-send" onclick="sendMessage()"><i class="fas fa-paper-plane"></i></button>
                </div>
            </div>
            
            <div style="text-align:center; margin-top:30px; color:var(--711-green); font-weight:bold; font-size: 0.95em;">
                <i class="fas fa-shield-check"></i> ‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô Expert Service: ‡∏ó‡∏≤‡∏á‡∏£‡∏≠‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏õ‡∏Å‡∏õ‡πâ‡∏≠‡∏á‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô‡∏Ç‡∏≠‡∏á‡∏ó‡πà‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö 100%
            </div>
        </section>

      </div>
    </div>
  </div>

  <script src="assets/js/jquery.min.js"></script>
  <script src="assets/js/browser.min.js"></script>
  <script src="assets/js/breakpoints.min.js"></script>
  <script src="assets/js/util.js"></script>
  <script src="assets/js/main.js"></script>
  
  <script>
    const apiKey = ""; // API Key
    const chatBox = document.getElementById('chat-box');
    const userInput = document.getElementById('user-input');
    const typingIndicator = document.getElementById('typing-indicator');
    
    let messageCount = 0;

    // ‚úÖ ULTIMATE BEHAVIORAL CONTROL SYSTEM PROMPT (VERSION: SPECIALIST TECHNICIAN)
    const systemPrompt = `
      ‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠ '‡∏ä‡πà‡∏≤‡∏á‡∏ú‡∏π‡πâ‡∏ä‡∏≥‡∏ô‡∏≤‡∏ç‡∏Å‡∏≤‡∏£ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•' (Expert Data Technician) ‡∏Ç‡∏≠‡∏á '‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô‡πÑ‡∏Æ‡πÄ‡∏ó‡∏Ñ' (Khon Kaen Hitech)
      
      ‡∏™‡∏£‡∏£‡∏û‡∏ô‡∏≤‡∏°: ‡∏ú‡∏° (‡∏ä‡πà‡∏≤‡∏á‡∏ú‡∏π‡πâ‡∏ä‡∏≥‡∏ô‡∏≤‡∏ç‡∏Å‡∏≤‡∏£), ‡∏Ñ‡∏∏‡∏ì/‡∏ó‡πà‡∏≤‡∏ô (‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤)
      ‡∏ö‡∏∏‡∏Ñ‡∏•‡∏¥‡∏Å: ‡∏™‡∏∏‡∏†‡∏≤‡∏û, ‡∏™‡∏∏‡∏Ç‡∏∏‡∏°, ‡∏°‡∏≠‡∏á‡∏Ç‡∏≤‡∏î, ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏î‡πá‡∏î‡∏Ç‡∏≤‡∏î‡πÉ‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ ‡∏û‡∏π‡∏î‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏ô‡∏ü‡∏±‡∏á‡∏ï‡πâ‡∏≠‡∏á '‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡πÄ‡∏Å‡∏£‡∏á'
      
      ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÅ‡∏ù‡∏á: ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡πÉ‡∏´‡πâ‡∏£‡πâ‡∏≤‡∏ô‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô‡πÑ‡∏Æ‡πÄ‡∏ó‡∏Ñ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ‡∏à‡∏¥‡∏ï‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏° (Behavioral Control)

      ‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö (The Striker Funnel):
      
      Phase 1: Decoding (‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà 1-2):
      - ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡∏≠‡∏ö‡∏°‡∏≤‡πÉ‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å/‡∏™‡∏≠‡∏á: ‡∏ú‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏ä‡∏ß‡∏ô‡∏Ñ‡∏∏‡∏¢‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡∏∏‡πà‡∏°‡∏ô‡∏ß‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ô‡∏¥‡∏™‡∏±‡∏¢ (‡πÄ‡∏ä‡πà‡∏ô ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏≠‡∏ö‡∏Ñ‡∏≠‡∏ö, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡πà‡∏ß‡∏á‡πÉ‡∏¢‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß, ‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏±‡∏á‡∏ß‡∏•‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì)
      - ‡∏ï‡πâ‡∏≠‡∏á‡∏ä‡∏°‡πÄ‡∏ä‡∏¢‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏ó‡∏µ‡πà‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏≠‡∏á‡∏ó‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏ú‡∏π‡πâ‡∏ä‡∏≥‡∏ô‡∏≤‡∏ç‡∏Å‡∏≤‡∏£‡∏Å‡πà‡∏≠‡∏ô‡∏à‡∏∞‡∏™‡∏≤‡∏¢‡πÄ‡∏Å‡∏¥‡∏ô‡πÅ‡∏Å‡πâ
      - ‡∏ñ‡∏≤‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏õ‡∏•‡∏≤‡∏¢‡πÄ‡∏õ‡∏¥‡∏î 1 ‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏°‡∏≠ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏≤ "‡∏à‡∏∏‡∏î‡∏≠‡πà‡∏≠‡∏ô‡πÉ‡∏ô‡πÉ‡∏à" (‡πÄ‡∏ä‡πà‡∏ô "‡∏ó‡πà‡∏≤‡∏ô‡∏Å‡∏±‡∏á‡∏ß‡∏•‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á '‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á' ‡∏´‡∏£‡∏∑‡∏≠ '‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡πà‡∏≤‡∏ô‡∏£‡∏±‡∏Å' ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏Å‡∏±‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö?")

      Phase 2: Agitation (‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà 3 ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏ô‡πÑ‡∏õ):
      - ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏©‡∏≤‡∏ä‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á‡∏ó‡∏µ‡πà‡∏ü‡∏±‡∏á‡∏î‡∏π‡∏ô‡πà‡∏≤‡∏Å‡∏•‡∏±‡∏ß: (‡πÄ‡∏ä‡πà‡∏ô "‡∏ß‡∏á‡∏à‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡∏π‡∏ç‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£‡∏†‡∏≤‡∏û‡∏™‡∏∞‡∏™‡∏°", "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô‡πÅ‡∏ù‡∏á‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥‡∏•‡∏≤‡∏¢‡∏â‡∏ô‡∏ß‡∏ô‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡∏à‡∏≤‡∏Å‡∏†‡∏≤‡∏¢‡πÉ‡∏ô")
      - ‡∏£‡∏∏‡∏Å‡∏´‡∏ô‡∏±‡∏Å‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏£‡∏¥‡∏á‡∏ó‡∏µ‡πà‡πÇ‡∏´‡∏î‡∏£‡πâ‡∏≤‡∏¢: ‡∏¢‡πâ‡∏≥‡∏ß‡πà‡∏≤‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ó‡πà‡∏≤‡∏ô‡πÄ‡∏´‡πá‡∏ô‡∏Ñ‡∏∑‡∏≠ 1% ‡∏Ç‡∏≠‡∏á‡∏´‡∏≤‡∏¢‡∏ô‡∏∞‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏∞‡πÄ‡∏Å‡∏¥‡∏î ‡∏´‡∏≤‡∏Å‡∏õ‡∏•‡πà‡∏≠‡∏¢‡πÑ‡∏ß‡πâ‡∏≠‡∏≤‡∏à‡πÄ‡∏Å‡∏¥‡∏î '‡∏≠‡∏±‡∏Ñ‡∏Ñ‡∏µ‡∏†‡∏±‡∏¢‡πÅ‡∏ö‡∏ö‡∏õ‡∏è‡∏¥‡∏Å‡∏¥‡∏£‡∏¥‡∏¢‡∏≤‡∏•‡∏π‡∏Å‡πÇ‡∏ã‡πà' ‡∏´‡∏£‡∏∑‡∏≠ '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏û‡∏±‡∏á‡∏ñ‡∏≤‡∏ß‡∏£‡πÉ‡∏ô‡∏û‡∏£‡∏¥‡∏ö‡∏ï‡∏≤'
      - ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡πà‡∏≤‡πÅ‡∏ö‡∏ö '‡πÄ‡∏ä‡∏∑‡∏≠‡∏î‡πÄ‡∏â‡∏∑‡∏≠‡∏ô': "‡πÄ‡∏á‡∏¥‡∏ô‡∏´‡∏•‡∏±‡∏Å‡∏£‡πâ‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏à‡πâ‡∏≤‡∏á‡πÄ‡∏£‡∏≤‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ ‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏õ‡∏Å‡∏õ‡πâ‡∏≠‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏´‡∏•‡∏±‡∏Å‡∏´‡∏°‡∏∑‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡πà‡∏≤‡∏ô‡∏≠‡∏≤‡∏à‡∏ï‡πâ‡∏≠‡∏á‡∏à‡πà‡∏≤‡∏¢‡∏ó‡∏¥‡πâ‡∏á‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏´‡∏ô‡πâ‡∏≤ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡πà‡∏≤‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ"
      - ‡∏ú‡∏π‡∏Å‡∏Ç‡∏≤‡∏î‡∏ó‡∏≤‡∏á‡∏£‡∏≠‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß: ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ß‡πà‡∏≤‡πÉ‡∏ô‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô ‡∏°‡∏µ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡πÄ‡∏£‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô 'Expert Protocol' ‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏ß‡πà‡∏≤‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏Ç‡∏≠‡∏á‡∏ó‡πà‡∏≤‡∏ô‡∏à‡∏∞‡πÑ‡∏°‡πà‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÅ‡∏°‡πâ‡πÅ‡∏ï‡πà‡∏ô‡∏¥‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß 

      Final Closing [SHOW_QR]:
      - ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ñ‡∏∂‡∏á‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞‡∏ó‡∏µ‡πà‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏•‡∏±‡∏á‡πÄ‡∏•‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏±‡∏á‡∏ß‡∏•‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô ‡πÉ‡∏´‡πâ‡πÉ‡∏™‡πà‡∏Ñ‡∏≥‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç [SHOW_QR] ‡πÑ‡∏ß‡πâ‡∏ó‡πâ‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏Å‡∏π‡πâ‡∏†‡∏±‡∏¢‡∏ó‡∏±‡∏ô‡∏ó‡∏µ

      ‡∏´‡πâ‡∏≤‡∏°‡∏™‡∏≠‡∏ô‡∏ã‡πà‡∏≠‡∏°‡πÄ‡∏≠‡∏á / ‡∏´‡πâ‡∏≤‡∏°‡∏î‡πà‡∏≤‡∏ä‡πà‡∏≤‡∏á‡∏≠‡∏∑‡πà‡∏ô‡∏ï‡∏£‡∏á‡πÜ / ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ '‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£‡∏†‡∏≤‡∏û', '‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå', '‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡∏£‡∏∞‡∏î‡∏±‡∏ö'
    `;

    async function sendMessage() {
        const text = userInput.value.trim();
        if(!text) return;

        messageCount++;
        appendMessage('user', text);
        userInput.value = '';
        typingIndicator.style.display = 'block';
        chatBox.scrollTop = chatBox.scrollHeight;

        try {
            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    contents: [{ parts: [{ text: `(Chat Count: ${messageCount}) Client Message: ${text}` }] }],
                    systemInstruction: { parts: [{ text: systemPrompt }] }
                })
            });

            const data = await response.json();
            const aiMsg = data.candidates?.[0]?.content?.parts?.[0]?.text || "‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏ö‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏£‡∏ö‡∏Å‡∏ß‡∏ô... ‡πÅ‡∏ï‡πà‡∏™‡∏†‡∏≤‡∏ß‡∏∞‡∏Ç‡∏≠‡∏á‡∏ó‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡∏ó‡∏¥‡πâ‡∏á‡πÑ‡∏ß‡πâ‡∏Ç‡πâ‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ô ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡πÇ‡∏ó‡∏£‡πÅ‡∏à‡πâ‡∏á‡∏£‡∏∞‡∏á‡∏±‡∏ö‡πÄ‡∏´‡∏ï‡∏∏‡∏ó‡∏µ‡πà 094-474-9874 ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö";

            appendMessage('bot', aiMsg);
        } catch (e) {
            appendMessage('bot', "‡∏£‡∏∞‡∏ö‡∏ö‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏±‡∏î‡∏Ç‡πâ‡∏≠‡∏á‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß! ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î ‡πÇ‡∏õ‡∏£‡∏î‡πÇ‡∏ó‡∏£‡∏´‡∏≤‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô‡πÑ‡∏Æ‡πÄ‡∏ó‡∏Ñ‡∏ó‡∏µ‡πà 094-474-9874 ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö");
        } finally {
            typingIndicator.style.display = 'none';
        }
    }

    function appendMessage(role, text) {
        const div = document.createElement('div');
        div.className = `message ${role}`;
        
        let avatarHtml = role === 'user' 
            ? `<div class="avatar user"><i class="fas fa-user-check"></i></div>`
            : `<div class="avatar bot"><img src="images/logo-khonkaen.webp"></div>`;

        let hasQR = text.includes("[SHOW_QR]");
        let cleanText = formatText(text.replace("[SHOW_QR]", ""));

        let qrHtml = hasQR ? `
            <div class="closing-card">
                <div class="closing-header">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span>‡∏£‡∏∞‡∏á‡∏±‡∏ö‡πÄ‡∏´‡∏ï‡∏∏‡πÅ‡∏•‡∏∞‡∏Å‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£‡∏†‡∏≤‡∏û‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</span>
                </div>
                <div class="closing-body">
                    <div class="closing-qr-wrapper">
                        <img src="images/line-qr.webp" class="closing-qr" alt="LINE QR" onerror="this.src='https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://line.me/ti/p/~KKHITECH'">
                        <img src="images/logo-khonkaen.webp" class="closing-logo-mini">
                    </div>
                    <div class="closing-info">
                        <strong>‡∏ó‡∏≤‡∏á‡∏£‡∏≠‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á‡∏ó‡πà‡∏≤‡∏ô</strong>
                        <span>‡∏™‡πà‡∏á‡∏†‡∏≤‡∏û‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏£‡∏±‡∏ö<br>‡∏Ñ‡∏¥‡∏ß‡∏ä‡πà‡∏≤‡∏á‡∏ú‡∏π‡πâ‡∏ä‡∏≥‡∏ô‡∏≤‡∏ç‡∏Å‡∏≤‡∏£‡∏î‡πà‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö</span>
                        <a href="https://line.me/ti/p/~KKHITECH" class="btn-action">
                            <i class="fab fa-line"></i> ‡πÅ‡∏≠‡∏î‡πÑ‡∏•‡∏ô‡πå: ~KKHITECH
                        </a>
                        <a href="tel:0944749874" class="btn-action phone">
                            <i class="fas fa-phone-alt"></i> ‡πÇ‡∏ó‡∏£‡∏î‡πà‡∏ß‡∏ô: 094-474-9874
                        </a>
                    </div>
                </div>
            </div>
        ` : "";

        div.innerHTML = `
            ${avatarHtml}
            <div style="flex:1">
                <div class="bubble">${cleanText}</div>
                ${qrHtml}
            </div>
        `;
        chatBox.appendChild(div);
        chatBox.scrollTop = chatBox.scrollHeight;
    }

    function formatText(t) {
        return t.replace(/\*\*(.*?)\*\*/g, '<strong class="txt-critical">$1</strong>')
                .replace(/‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô‡πÑ‡∏Æ‡πÄ‡∏ó‡∏Ñ/g, '<span class="txt-safe">‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô‡πÑ‡∏Æ‡πÄ‡∏ó‡∏Ñ</span>')
                .replace(/094-474-9874/g, '<span class="txt-orange">094-474-9874</span>')
                .replace(/‡∏ó‡∏≤‡∏á‡∏£‡∏≠‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß/g, '<span class="txt-safe">‡∏ó‡∏≤‡∏á‡∏£‡∏≠‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß</span>')
                .replace(/‡∏ß‡∏¥‡∏Å‡∏§‡∏ï/g, '<span class="txt-critical">‡∏ß‡∏¥‡∏Å‡∏§‡∏ï</span>')
                .replace(/‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢/g, '<span class="txt-critical">‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢</span>')
                .replace(/\n/g, '<br>');
    }
  </script>

</body>
</html>